<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <!-- Bootstrap LINK -->
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
  <script src="jquery-3.4.1.min.js"></script>
  <title>Survey</title>
</head>
<body>
        <div class="container surveyInfo">
          <h1>Survey</h1>
          <p>Its time to take your Survey! There are ten questions, each question is rated one to five. One will be you completley disagree, and five will be you completeley agree.Be honest, these questions are meant to help you find great friendships! </p>
          <form>
            <div class="form-group">
              <input id="name" type="text" class="form-control" placeholder="Name (Required)">
            </div>
            <div class="form-group">
              <input id="photo" type="text" class="form-control" placeholder="Link to Profile Photo (Required)">
            </div>
            <div class="form-group">
              <label for="question1">I enjoy working in the yard.</label>
              <select class="form-control" id="question1">
                <option value="empty"></option>
                <option value="1">1</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5</option>
              </select>
            </div>
            <div class="form-group">
              <label for="question2">I like waking up at night, and eating a snack.</label>
              <select class="form-control" id="question2">
                <option value="empty"></option>
                <option value="1">1</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5</option>
              </select>
            </div>
            <div class="form-group">
              <label for="question3">Im pretty much an amazing dancer.</label>
              <select class="form-control" id="question3">
                <option value="empty"></option>
                <option value="1">1</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5</option>
              </select>
            </div>
            <div class="form-group">
              <label for="question4">Time is money.</label>
              <select class="form-control" id="question4">
                <option value="empty"></option>
                <option value="1">1</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5</option>
              </select>
            </div>
            <div class="form-group">
              <label for="question5">I love outdoor activities like fishing and hunting.</label>
              <select class="form-control" id="question5">
                <option value="empty"></option>
                <option value="1">1</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5</option>
              </select>
            </div>
            <div class="form-group">
              <label for="question6">Some say im a pretty humble person.</label>
              <select class="form-control" id="question6">
                <option value="empty"></option>
                <option value="1">1</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5</option>
              </select>
            </div>
            <div class="form-group">
              <label for="question7">I would rather watch a movie then go to the thearter.</label>
              <select class="form-control" id="question7">
                <option value="empty"></option>
                <option value="1">1</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5</option>
              </select>
            </div>
            <div class="form-group">
              <label for="question8">I like to dress nice the majority of the time.</label>
              <select class="form-control" id="question8">
                <option value="empty"></option>
                <option value="1">1</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5</option>
              </select>
            </div>
            <div class="form-group">
              <label for="question9">Gym is a second home to me.</label>
              <select class="form-control" id="question9">
                <option value="empty"></option>
                <option value="1">1</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5</option>
              </select>
            </div>
            <div class="form-group">
              <label for="question10">Fist fights are ok as long as a beer is bought after.</label>
              <select class="form-control" id="question10">
                <option value="empty"></option>
                <option value="1">1</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5</option>
              </select>
            </div>
          </form>
          <div class="text-center">
            <button id="submitBtn" type="submit" class="btn btn-success btn-lg">Submit</button>
          </div>
        <!-- //Attempt to Create A Modal Window --> 
        <div id="modal1" class="modal">
            <div class="modal-content">
              <h4>Closest Friend Match</h4>
              <div class="divider"></div>
              <h5 id="userMatch"></h5>
              <img id="userMatchImage" class="materialboxed" width="650" src="">
            </div>
            <div class="modal-footer">
              <a href="/survey" class="modal-action modal-close waves-effect waves-green btn-flat">Fill Again!</a>
            </div>
          </div>
          
          <script type="text/javascript">
            $(document).ready(function() {
              $('select').material_select();
              $('.modal').modal({
                dismissible: false, // Modal can be dismissed by clicking outside of the modal
                opacity: .5, // Opacity of modal background
                inDuration: 300, // Transition in duration
                outDuration: 200, // Transition out duration
                startingTop: '4%', // Starting top style attribute
                endingTop: '10%' // Ending top style attribute
              });
            });
            // Activate submit button
            $('#submitBtn').on('click', function(event) {
              event.preventDefault();
              // Gather user inputs
              var userInput = {
                name: $('#name').val().trim(),
                photo: $('#photo').val().trim(),
                scores:[
                  $('#question1').val().trim(),
                  $('#question2').val().trim(),
                  $('#question3').val().trim(),
                  $('#question4').val().trim(),
                  $('#question5').val().trim(),
                  $('#question6').val().trim(),
                  $('#question7').val().trim(),
                  $('#question8').val().trim(),
                  $('#question9').val().trim(),
                  $('#question10').val().trim()
                ]
              };
              console.log('userInput = ' + JSON.stringify(userInput));
              
              // Add user inputs to friends list
              $.post('/api/friends', userInput)
                  .done(function(data) {
                    // console.log('response = ' + JSON.stringify(data));
                    // Set the name and image values of friend match
                    $('#userMatch').html(data.matchName);
                  $("#userMatchImage").attr("src", data.matchImage);
                  // Pop open the modal dialog
                    $('#modal1').modal('open');
                  });
            });
          </script>

        <footer>
          <div class="container">
            <a href="./routing/api/friends">Find your Friends</a>
            <span>|</span>
            <a href="https://github.com/jbuentello/FriendFinder">GitHub Repo</a>
          </div>
        </footer>
      
        
</body>
</html>